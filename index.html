<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Your Digital Flow</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>
<body>
  <div id="app">
    <!-- Auth Modal -->
    <div id="auth-modal" class="modal show">
      <div class="modal-content">
        <h2>Sign In</h2>
        <form id="auth-form">
          <input type="email" id="auth-email" placeholder="Email" required />
          <input type="password" id="auth-password" placeholder="Password" required />
          <button type="submit">Sign In</button>
        </form>
        <p id="auth-error" class="error"></p>
      </div>
    </div>

    <!-- Timeline Page -->
    <section id="timeline-page" class="page show">
      <header>
        <div class="calendar-bar">
          <input type="date" id="date-picker" />
          <button id="refresh-btn" title="Refresh">⟳</button>
        </div>
        <h1>Your Digital Flow</h1>
      </header>
      <div id="timeline-list" class="timeline-list">
        <!-- Entries will be injected here -->
      </div>
      <div id="timeline-loading" class="loading">Loading...</div>
      <div id="timeline-empty" class="empty">No entries for this date.</div>
    </section>

    <!-- Add Entry Page (Slide-up) -->
    <section id="add-entry-page" class="page modal">
      <div class="modal-content slide-up">
        <h2>New Entry</h2>
        <form id="entry-form">
          <input type="text" id="entry-title" placeholder="Title" maxlength="40" required />
          <textarea id="entry-description" placeholder="Description" maxlength="500" required></textarea>
          <div class="form-row">
            <label>Time</label>
            <input type="time" id="entry-time" required />
          </div>
          <div class="form-row">
            <label>Mood</label>
            <div id="mood-selector" class="mood-selector">
              <button type="button" data-mood="😊 Happy">😊</button>
              <button type="button" data-mood="😐 Neutral">😐</button>
              <button type="button" data-mood="😢 Sad">😢</button>
              <button type="button" data-mood="😠 Angry">😠</button>
              <button type="button" data-mood="🤩 Excited">🤩</button>
            </div>
          </div>
          <div class="form-row">
            <label>Tags</label>
            <input type="text" id="entry-tags" placeholder="#wellness, #work" />
          </div>
          <div class="form-actions">
            <button type="submit" class="fab">Add Entry</button>
            <button type="button" id="close-add-entry">Cancel</button>
          </div>
        </form>
        <p id="entry-error" class="error"></p>
      </div>
    </section>

    <!-- Profile/Settings Page -->
    <section id="profile-page" class="page">
      <header>
        <h2>Profile & Settings</h2>
      </header>
      <div class="profile-info">
        <div id="user-email"></div>
        <button id="logout-btn">Logout</button>
      </div>
      <div class="settings">
        <div class="search-bar">
          <input type="text" id="search-input" placeholder="Search entries..." />
        </div>
        <div class="filter-bar">
          <select id="filter-mood">
            <option value="">All Moods</option>
            <option value="😊 Happy">😊 Happy</option>
            <option value="😐 Neutral">😐 Neutral</option>
            <option value="😢 Sad">😢 Sad</option>
            <option value="😠 Angry">😠 Angry</option>
            <option value="🤩 Excited">🤩 Excited</option>
          </select>
          <input type="text" id="filter-tag" placeholder="Filter by tag..." />
        </div>
        <div class="export-bar">
          <button id="export-json">Export JSON</button>
          <button id="export-txt">Export TXT</button>
        </div>
        <div class="theme-toggle">
          <label>Theme</label>
          <button id="theme-toggle-btn">🌙</button>
        </div>
      </div>
      <div id="profile-entries" class="timeline-list"></div>
    </section>

    <!-- Bottom Navigation Bar -->
    <nav class="bottom-nav">
      <button class="nav-btn" data-page="timeline-page">
        <span>🏠</span>
        <span class="nav-label">Timeline</span>
      </button>
      <button class="nav-btn fab" id="open-add-entry">
        <span>＋</span>
      </button>
      <button class="nav-btn" data-page="profile-page">
        <span>👤</span>
        <span class="nav-label">Profile</span>
      </button>
    </nav>
  </div>
  <script src="app.js"></script>
</body>
</html>
